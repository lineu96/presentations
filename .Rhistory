geom_errorbar(aes(x=Momento,
ymin=runif(12), ymax=(runif(12)+1)),
width=0.4,
colour="orange",
alpha=0.9,
size=1.3,
position = position_dodge(0.9))
ggplot(table4_plot, aes(x=Momento,
y=Predito,
fill = Group))+
theme_bw() +
geom_bar(stat = 'identity',
position = 'dodge',
col=1) + scale_fill_manual(values=c("#A9A9A9", "#FFFAF0"))+
theme(legend.position = 'top') +
#labs(title = "Ecap")+
xlab('Experimental moment') +
ylab('Estimate')+
#geom_point() +
#geom_text(x=3, y=3, label="*")+
facet_wrap(~Métrica, scales = 'free')+
geom_errorbar(aes(x=Momento,
ymin=Min, ymax=Max),
width=0.4,
#colour="orange",
alpha=0.9,
#size=1.3,
position = position_dodge(0.9))
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
z = rep(c('a','b'), 750)
df <- data.frame(x=x,y=y,z=z)
head(df)
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
x = v1*2
y = v1+v2
z = rep(c('a','b'), 750)
df <- data.frame(x=x,y=y,z=z)
head(df)
source('~/.active-rstudio-document', echo=TRUE)
summary(df)
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
w = ifelse(df$y < 33, 'c', NA)
w
summary(df)
w = ifelse(df$y < 35, 'c', NA)
w = ifelse(df$y < 39, 'd', df$y)
w
w = ifelse(df$y < 35, 'c', NA)
w
w = ifelse(df$y < 39 & df$y >= 39 , 'd', w)
w
w = ifelse(df$y < 35, 'c', NA)
w
w = ifelse(df$y < 39 & df$y >= 35 , 'd', w)
w
w = ifelse(is.na(w) == T, 'e', w)
w
summary(w)
table(w)
w = ifelse(df$y < 40, 'c', NA)
w = ifelse(df$y < 60 & df$y >= 40 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
table(w)
w = ifelse(df$y < 40, 'c', NA)
w = ifelse(df$y < 50 & df$y >= 40 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
table(w)
w = ifelse(df$y < 40, 'c', NA)
w = ifelse(df$y < 45 & df$y >= 40 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
table(w)
w = ifelse(df$y < 30, 'c', NA)
w = ifelse(df$y < 45 & df$y >= 30 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
table(w)
w = ifelse(df$y < 30, 'c', NA)
w = ifelse(df$y < 50 & df$y >= 30 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
table(w)
w = ifelse(df$y < 40, 'c', NA)
w = ifelse(df$y < 50 & df$y >= 30 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
table(w)
w = ifelse(df$y < 50, 'c', NA)
table(w)
1500/3
w = ifelse(df$y < 40, 'c', NA)
table(w)
w = ifelse(df$y < 35, 'c', NA)
table(w)
w = ifelse(df$y < 37, 'c', NA)
table(w)
w = ifelse(df$y < 36, 'c', NA)
table(w)
w = ifelse(df$y < 50 & df$y >= 36 , 'd', w)
table(w)
w = ifelse(df$y < 40 & df$y >= 36 , 'd', w)
table(w)
w = ifelse(df$y < 36, 'c', NA)
w = ifelse(df$y < 40 & df$y >= 36 , 'd', w)
table(w)
w = ifelse(df$y < 36, 'c', NA)
w = ifelse(df$y < 42 & df$y >= 36 , 'd', w)
table(w)
w = ifelse(df$y < 36, 'c', NA)
w = ifelse(df$y < 42 & df$y >= 36 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
table(w)
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
z = rep(c('a','b'), 750)
w = ifelse(df$y < 36, 'c', NA)
w = ifelse(df$y < 42 & df$y >= 36 , 'd', w)
w = ifelse(is.na(w) == T, 'e', w)
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
x1 = rep(c('a','b'), 750)
x2 = ifelse(df$y < 36, 'c', NA)
x2 = ifelse(df$y < 42 & df$y >= 36 , 'd', x1)
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
x1 = rep(c('a','b'), 750)
x2 = ifelse(df$y < 36, 'c', NA)
x2 = ifelse(y < 36, 'c', NA)
x2 = ifelse(y < 36, 'c', NA)
x2 = ifelse(y < 42 & y >= 36 , 'd', x1)
x2 = ifelse(is.na(x1) == T, 'e', x1)
x2
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
x1 = rep(c('a','b'), 750)
x2 = ifelse(y < 36, 'c', NA)
x2 = ifelse(y < 42 & y >= 36 , 'd', x1)
x2 = ifelse(is.na(x1) == T, 'e', x1)
df <- data.frame(y=y,
x1=x1,
x2=x2)
head(df)
df <- data.frame(y=y,
x1=x1,
x2=x2)
head(df)
x2 = ifelse(y < 36, 'c', NA)
x2 = ifelse(y < 42 & y >= 36 , 'd', x1)
x2 = ifelse(is.na(x1) == T, 'e', x1)
df <- data.frame(y=y,
x1=x1,
x2=x2)
head(df)
x2
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
x1 = rep(c('a','b'), 750)
x2 = ifelse(y < 36, 'c', NA)
x2
x2 = ifelse(y < 42 & y >= 36 , 'd', x1)
x2
x2 = ifelse(is.na(x1) == T, 'e', x1)
x2
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
x1 = rep(c('a','b'), 750)
x2 = ifelse(y < 36, 'c', NA)
x2 = ifelse(y < 42 & y >= 36 , 'd', x2)
x2 = ifelse(is.na(x1) == T, 'e', x2)
table(x2)
x2 = ifelse(y < 36, 'c', NA)
x2 = ifelse(y < 42 & y >= 36 , 'd', x2)
x2 = ifelse(is.na(x1) == T, 'e', x2)
table(x2)
v1 = rnorm(1500, 20, 5)
v2 = rnorm(1500, 20, 5 )
y = v1+v2
x1 = rep(c('a','b'), 750)
x2 = ifelse(y < 36, 'c', NA)
x2 = ifelse(y < 42 & y >= 36 , 'd', x2)
x2 = ifelse(is.na(x2) == T, 'e', x2)
table(x2)
df <- data.frame(y=y,
x1=x1,
x2=x2)
head(df)
lm(y~x1+x2)
summary(lm(y~x1+x2))
summary(lm(y~x1+x2))
summary(lm(y~(x1+x2)^2))
summary(lm(y~(x1+x2)^2))
summary(lm(y~x1+x2))
#---------------------------------------------------------------
library(tidyverse)
library(gamlss)
source('~/Dropbox/Aulas-Acessorias/10 Ligia Carlos/2 R/0_funcoes.R')
# Dados
dados <- read.csv2("~/Dropbox/Aulas-Acessorias/10 Ligia Carlos/0 dados/dados.csv", sep = ',')
dados2 <- na.omit(dados)
imc <- dados %>% gather(key = 'momento_imc',
value = 'imc', imc1:imc4)
imc <- imc[,c(1,18,19)]
imc$chave <- 1:nrow(imc)
yale <- dados %>% gather(key = 'momento_yale',
value = 'yale', yale1:yale4)
yale <- yale[,c(1,18,19)]
yale$chave <- 1:nrow(yale)
ecap <- dados %>% gather(key = 'momento_ecap',
value = 'ecap', ecap1:ecap4)
ecap <- ecap[,c(1,18,19)]
ecap$chave <- 1:nrow(ecap)
dados3 <- dados %>% gather(key = 'momento',
value = 'peso', peso1:peso4)
dados3 <- dados3[,c(1,2,3,4,5,6,7,8,18,19)]
dados3$chave <- 1:nrow(dados3)
dados3 <- left_join(dados3, imc)
dados3 <- left_join(dados3, yale)
dados3 <- left_join(dados3, ecap)
dados3$momento <- as.factor(dados3$momento)
levels(dados3$momento) <- c('Pré op.','90 dias','365 dias')
dados3 <- dados3[,-c(12,14,16)]
dados4 <- na.omit(dados3)
## Preditor
pred_yale <- yale ~ momento + grupo + idade + altura +
peso + imc + momento:grupo + re(random=~1|id)
table4 <- expand.grid(Grupo=levels(dados4$grupo),
Momento=levels(dados4$momento))
table4
table4
table4$media_yale <- c(2.94, 3.89, 0.87, 0.7, 1.27, 0.82)
table4$sd_yale <- c(2.01, 1.9, 1.24, 0.97, 1.16, 1.01)
table4$media_ecap <- c(11.21,14.63,4.25,4.38,4.77,3.13)
table4$sd_ecap <- c(9.12,8.17,4.56,3.57,5.54,4.28)
table4
rep(table4$Grupo,2)
#---------------------------------------------------------------
table4$media_yale-table4$sd_yale
#---------------------------------------------------------------
table4$media_yale-table4$sd_yale,
table4$media_ecap-table4$sd_ecap
#---------------------------------------------------------------
table4$media_yale-table4$sd_yale,
table4$media_ecap-table4$sd_ecap
table4$media_ecap-table4$sd_ecap
table4_plot <- data.frame(Grupo = rep(table4$Grupo,2),
Momento = rep(table4$Momento,2),
Métrica = c(rep('Yale',6),
rep('Ecap',6)),
Media = c(table4$media_yale,
table4$media_ecap),
Min = c(table4$media_yale-table4$sd_yale,
table4$media_ecap-table4$sd_ecap),
Max= c(table4$media_yale+table4$sd_yale,
table4$media_ecap+table4$sd_ecap))
table4_plot
levels(table4_plot$Grupo)
levels(table4_plot$Grupo) <- c('Placebo', 'Probiotic')
levels(table4_plot$Momento)
levels(table4_plot$Momento) <- c('Pre-Surgical',
'3 months post-surgical',
'1 year post-surgical')
names(table4_plot)[1]
names(table4_plot)[1] <- 'Group'
table4_plot$Métrica <- factor(as.vector(table4_plot$Métrica), levels = c('Yale', 'Ecap'))
table4_plot
x11()
ggplot(table4_plot, aes(x=Momento,
y=Predito,
fill = Group))+
theme_bw() +
geom_bar(stat = 'identity',
position = 'dodge',
col=1) + scale_fill_manual(values=c("#A9A9A9", "#FFFAF0"))+
theme(legend.position = 'top') +
#labs(title = "Ecap")+
xlab('Experimental moment') +
ylab('Estimate')+
#geom_point() +
#geom_text(x=3, y=3, label="*")+
facet_wrap(~Métrica, scales = 'free')+
geom_errorbar(aes(x=Momento,
ymin=Min, ymax=Max),
width=0.4,
#colour="orange",
alpha=0.9,
#size=1.3,
position = position_dodge(0.9))
ggplot(table4_plot, aes(x=Momento,
y=Media,
fill = Group))+
theme_bw() +
geom_bar(stat = 'identity',
position = 'dodge',
col=1) + scale_fill_manual(values=c("#A9A9A9", "#FFFAF0"))+
theme(legend.position = 'top') +
#labs(title = "Ecap")+
xlab('Experimental moment') +
ylab('Estimate')+
#geom_point() +
#geom_text(x=3, y=3, label="*")+
facet_wrap(~Métrica, scales = 'free')+
geom_errorbar(aes(x=Momento,
ymin=Min, ymax=Max),
width=0.4,
#colour="orange",
alpha=0.9,
#size=1.3,
position = position_dodge(0.9))
ggplot(table4_plot, aes(x=Momento,
y=Media,
fill = Group))+
theme_bw() +
geom_bar(stat = 'identity',
position = 'dodge',
col=1) + scale_fill_manual(values=c("#A9A9A9", "#FFFAF0"))+
theme(legend.position = 'top') +
#labs(title = "Ecap")+
xlab('Experimental moment') +
ylab('Estimate')+
#geom_point() +
#geom_text(x=3, y=3, label="*")+
facet_wrap(~Métrica, scales = 'free')#+
ggplot(table4_plot, aes(x=Momento,
y=Media,
fill = Group))+
theme_bw() +
geom_bar(stat = 'identity',
position = 'dodge',
col=1) + scale_fill_manual(values=c("#A9A9A9", "#FFFAF0"))+
theme(legend.position = 'top') +
#labs(title = "Ecap")+
xlab('Experimental moment') +
ylab('Estimate')+
#geom_point() +
#geom_text(x=3, y=3, label="*")+
facet_wrap(~Métrica, scales = 'free')#+
cite(r)
cite()
citation()
table4 <- expand.grid(Grupo=levels(dados4$grupo),
Momento=levels(dados4$momento))
table4$media_yale <- c(2.94, 3.89, 0.87, 0.7, 1.27, 0.82)
table4$sd_yale <- c(2.01, 1.9, 1.24, 0.97, 1.16, 1.01)
table4$media_ecap <- c(11.21,14.63,4.25,4.38,4.77,3.13)
table4$sd_ecap <- c(9.12,8.17,4.56,3.57,5.54,4.28)
1.96*table4$sd_yale
table4$sd_yale
table4 <- expand.grid(Grupo=levels(dados4$grupo),
Momento=levels(dados4$momento))
table4$media_yale <- c(2.94, 3.89, 0.87, 0.7, 1.27, 0.82)
table4$sd_yale <- c(2.01, 1.9, 1.24, 0.97, 1.16, 1.01)
table4$media_ecap <- c(11.21,14.63,4.25,4.38,4.77,3.13)
table4$sd_ecap <- c(9.12,8.17,4.56,3.57,5.54,4.28)
table4_plot <- data.frame(Grupo = rep(table4$Grupo,2),
Momento = rep(table4$Momento,2),
Métrica = c(rep('Yale',6),
rep('Ecap',6)),
Media = c(table4$media_yale,
table4$media_ecap),
Min = c(table4$media_yale-table4$sd_yale,
table4$media_ecap-table4$sd_ecap),
Max= c(table4$media_yale+table4$sd_yale,
table4$media_ecap+table4$sd_ecap))
levels(table4_plot$Grupo) <- c('Placebo', 'Probiotic')
levels(table4_plot$Momento) <- c('Pre-Surgical',
'3 months post-surgical',
'1 year post-surgical')
names(table4_plot)[1] <- 'Group'
table4_plot$Métrica <- factor(as.vector(table4_plot$Métrica), levels = c('Yale', 'Ecap'))
x11()
ggplot(table4_plot, aes(x=Momento,
y=Media,
fill = Group))+
theme_bw() +
geom_bar(stat = 'identity',
position = 'dodge',
col=1) + scale_fill_manual(values=c("#A9A9A9", "#FFFAF0"))+
theme(legend.position = 'top') +
#labs(title = "Ecap")+
xlab('Experimental moment') +
ylab('Estimate')+
#geom_point() +
#geom_text(x=3, y=3, label="*")+
facet_wrap(~Métrica, scales = 'free')#+
table4 <- expand.grid(Grupo=levels(dados4$grupo),
Momento=levels(dados4$momento))
table4$media_yale <- c(2.94, 3.89, 0.87, 0.7, 1.27, 0.82)
table4$sd_yale <- c(2.01, 1.9, 1.24, 0.97, 1.16, 1.01)
table4$media_ecap <- c(11.21,14.63,4.25,4.38,4.77,3.13)
table4$sd_ecap <- c(9.12,8.17,4.56,3.57,5.54,4.28)
table4_plot <- data.frame(Grupo = rep(table4$Grupo,2),
Momento = rep(table4$Momento,2),
Métrica = c(rep('Yale',6),
rep('Ecap',6)),
Media = c(table4$media_yale,
table4$media_ecap),
Min = c(table4$media_yale-table4$sd_yale,
table4$media_ecap-table4$sd_ecap),
Max= c(table4$media_yale+table4$sd_yale,
table4$media_ecap+table4$sd_ecap))
levels(table4_plot$Grupo) <- c('Placebo', 'Probiotic')
levels(table4_plot$Momento) <- c('Pre-Surgical',
'3 months post-surgical',
'1 year post-surgical')
names(table4_plot)[1] <- 'Group'
table4_plot$Métrica <- factor(as.vector(table4_plot$Métrica), levels = c('Yale', 'Ecap'))
citation()
citation("mcglm")
citation("gamlss")
library(mcglm)
library(Matrix)
source('~/msc/3_th_mcglm/0_funcoes/functions.R')
dados <- read.csv2("~/msc/3_th_mcglm/1_exemplos/0_dados/NBA.csv",
header = T,
sep = ";",
dec = ',')
dados$X6 <- sample(as.factor(rep(c('nivel_1', 'nivel_2',
'nivel_3', 'nivel_4',
'nivel_5', 'nivel_6'), 9)))
names(dados) <- c('x1', 'x2', 'y1', 'y2', 'y3', 'x3')
form1 <- y1 ~ x1+x2+x3
form2 <- y2 ~ x1+x2+x3
form3 <- y3 ~ x1+x2+x3
Z0 <- mc_id(dados) # Identidade
fit <-
mcglm(linear_pred = c(form1,
form2,
form3),
matrix_pred = list(c(Z0),
c(Z0),
c(Z0)),
link = c("identity","identity","identity"),
variance = c("tweedie",
"tweedie",
"tweedie"),
control_algorithm = list(verbose = T,
tuning = 0.1,
max_iter = 20,
tol = 1e-01),
data = dados)
fit$beta_names[[1]]
summary(fit)
mc_anova_pc <- anova(fit)
i = 1
mc_anova_pc[[i]]
mc_anova_I(fit)[[i]]
mc_anova_pc[[i]]
mc_anova_I(fit)[[i]]
mc_anova_II(fit)[[i]]
mc_anova_III(fit)[[i]]
fit$beta_names[[1]]
mc_anova_pc[[i]]
mc_anova_I(fit)[[i]]
mc_anova_II(fit)[[i]]
mc_anova_III(fit)[[i]]
exp(1.13)
exp(0.310)
exp(-0.310)
exp(2.664)
c(37, 30, 29, 30, 24, 31, 27, 26, 26, 31, 32, 25, 27, 30)
paes <- c(37, 30, 29, 30, 24, 31, 27, 26, 26, 31, 32, 25, 27, 30)
dados <- data.frame(aluno =	c(1,	2,	3,	4,	5,	6,	7,	8,	9,	10),
math = c(75,	60,	52,	75,	52,	62,	75,	70,	54,	73),
music = c(92,	80,	69,	92,	69,	64,	92,	70,	62,	81))
mean(dados$math)
sd(dados$music)/mean(dados$music)
dados$math>64
sum(dados$math>64)
sum(dados$math>64)/nrow(dados)
var(dados$music)
sd(dados$music)
(sum(dados$math>64)/nrow(dados))*100
sd(dados$music)
boxplot(c(35,46,53,37,48,53,43,49,59,45,49,59,46,53,65))
seq(35,65)
seq(35,65,1)
seq(35,65,10)
seq(35,65,5)
boxplot(c(35,46,53,37,48,53,43,49,59,45,49,59,46,53,65),
xlim = seq(35,65,5))
seq(35,65,5)
fivenum(c(35,46,53,37,48,53,43,49,59,45,49,59,46,53,65))
boxplot(c(35,46,53,37,48,53,43,49,59,45,49,59,46,53,65))
dados <- data.frame(aluno =	c(1,	2,	3,	4,	5,	6,	7,	8,	9,	10, 11),
math = c(54,	75,	62,	60,	72,	62,	85,	56,	83,	75,	51),
music = c(62,	54,	61,	80,	88,	64,	80,	60,	82,	92,	75))
sd(dados$math)
median(dados$math)
var(dados$music)
sd(dados$music)/mean(dados$music)
xc(28,	37,	37,	31,	32,	25,	23,
24,	34,	31,	30,	30,	29,	30)
x=c(28,	37,	37,	31,	32,	25,	23,
24,	34,	31,	30,	30,	29,	30)
range(x)
x*0.2
range(x*0.2)
x
range(x)
range(x*1.2)
diff(range(x))
diff(range(x*1.2))
diff(range(x))
diff(range(x*1.2))
setwd("~/presentations")
